{"policyDetails":[{"description":"This policy will validate a GIT PR.","processors":[{"description":"The WSDL Validator","className":"io.scepta.samples.utilities.WSDLValidator","dependencies":[{"groupId":"io.scepta","artifactId":"scepta-samples-utilities","version":"0.1.0-SNAPSHOT"}],"name":"WSDLValidator"}],"dependencies":[],"name":"ValidatePR","resources":[]}],"policyDefinitions":{"ValidatePR":"<route id=\"ValidatePR\">\n\t<from uri=\"endpoint:git?action=pullRequest\"/>\n\t<to uri=\"endpoint:git?action=pullRequestFiles\" />\n\t<split parallelProcessing=\"true\">\n\t\t<simple>${body}</simple>\n\t\t<log message=\"Processing item ${body}\" />\n        <choice>\n        \t<when>\n            \t<simple>${body.filename.endsWith(\".wsdl\")}</simple>\n\t\t\t\t<to uri=\"direct:ValidateWSDL\" />\n            </when>\n        </choice>\n\t</split>\n\t<transform>\n\t\t<simple>Validated changes for PR #${header.GitHubPullRequest}</simple>\n\t</transform>\n\t<to uri=\"endpoint:gitprstate?state=success\"/>\n</route>\n\n<route id=\"ValidateWSDL\" >\n\t<from uri=\"direct:ValidateWSDL\" />\n    <to uri=\"endpoint:git?action=getCommitFile\" />\n    <log message=\"WSDL File contents: ${body}\" />\n    <to uri=\"processor:WSDLValidator\" />\n\t<split parallelProcessing=\"true\">\n\t\t<simple>${body}</simple>\n\t\t<log message=\"Processing issue ${body}\" />\n\t\t<to uri=\"endpoint:git?action=pullRequestComment\" />\n\t</split>\n</route>"},"groupDetails":{"description":"Monitor a GIT repository and validate PRs, raising JIRA bug and twitter notification if errors found","endpoints":[{"description":"Github repository general endpoint","uri":"github://${action}","consumerOptions":{"username":"sceptademo","password":".overlord1","repoOwner":"sceptademo","repoName":"scepta-test"},"characteristics":[],"producerOptions":{"username":"sceptademo","password":".overlord1","repoOwner":"sceptademo","repoName":"scepta-test"},"dependencies":[],"name":"git"},{"description":"Github repository endpoint for setting a PR state","uri":"github://pullRequestState?state=${state}","consumerOptions":{},"characteristics":[],"producerOptions":{"username":"sceptademo","password":".overlord1","repoOwner":"sceptademo","repoName":"scepta-test"},"dependencies":[],"name":"gitprstate"}],"processors":[],"name":"ValidateGITPR"},"resourceDefinitions":{}}