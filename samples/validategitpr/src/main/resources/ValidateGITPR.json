{"policyDefinitions":{"ValidatePR":"<route id=\"ValidatePR\">\n\t<from uri=\"scepta:gitpr\"/>\n\t<to uri=\"scepta:gitprfiles\" />\n\t<split parallelProcessing=\"true\">\n\t\t<simple>${body}</simple>\n\t\t<log message=\"Processing item ${body}\" />\n        <choice>\n        \t<when>\n            \t<simple>${body.filename.endsWith(\".wsdl\")}</simple>\n\t\t\t\t<to uri=\"direct:ValidateWSDL\" />\n            </when>\n        </choice>\n\t</split>\n\t<transform>\n\t\t<simple>Validated changes for PR #${header.GitHubPullRequest}</simple>\n\t</transform>\n\t<to uri=\"scepta:gitprstate?state=success\"/>\n</route>\n\n<route id=\"ValidateWSDL\" >\n\t<from uri=\"direct:ValidateWSDL\" />\n    <to uri=\"scepta:gitfile\" />\n    <log message=\"WSDL File contents: ${body}\" />\n</route>"},"resourceDefinitions":{"ValidateWSDL.mvel":"import io.scepta.samples.utilities.WSDLValidator;\n\nWSDLValidator validator=new WSDLValidator();\n\nvalidator.validate(request.body);"},"groupDetails":{"description":"Monitor a GIT repository and validate PRs, raising JIRA bug and twitter notification if errors found","endpoints":[{"description":"Endpoint to change status of a commit on a PR","characteristics":[],"consumerOptions":{},"producerOptions":{"username":"sceptademo","password":".overlord1","repoOwner":"sceptademo","repoName":"scepta-test"},"uri":"github://pullRequestState","dependencies":[],"name":"gitprstate"},{"description":"Endpoint to close a PR","characteristics":[],"consumerOptions":{},"producerOptions":{"username":"sceptademo","password":".overlord1","repoOwner":"sceptademo","repoName":"scepta-test"},"uri":"github://closePullRequest","dependencies":[],"name":"gitprclose"},{"description":"Endpoint to get a file associated with a commit","characteristics":[],"consumerOptions":{},"producerOptions":{"username":"sceptademo","password":".overlord1","repoOwner":"sceptademo","repoName":"scepta-test"},"uri":"github://getcommitfile","dependencies":[],"name":"gitfile"},{"description":"Endpoint to get files associated with a PR","characteristics":[],"consumerOptions":{},"producerOptions":{"username":"sceptademo","password":".overlord1","repoOwner":"sceptademo","repoName":"scepta-test"},"uri":"github://pullRequestFiles","dependencies":[],"name":"gitprfiles"},{"description":"Endpoint to change status of a commit on a PR","characteristics":[],"consumerOptions":{},"producerOptions":{"username":"sceptademo","password":".overlord1","repoOwner":"sceptademo","repoName":"scepta-test"},"uri":"github://pullRequestState","dependencies":[],"name":"gitprstate"},{"description":"Endpoint to comment on PR.","characteristics":[],"consumerOptions":{},"producerOptions":{"username":"sceptademo","password":".overlord1","repoOwner":"sceptademo","repoName":"scepta-test"},"uri":"github://pullRequestComment","dependencies":[],"name":"gitprcomment"},{"description":"Monitor a git PR.","characteristics":[],"consumerOptions":{"username":"sceptademo","password":".overlord1","repoOwner":"sceptademo","repoName":"scepta-test"},"producerOptions":{},"uri":"github://pullRequest","dependencies":[],"name":"gitpr"}],"name":"ValidateGITPR"},"policyDetails":[{"description":"This policy will validate a GIT PR.","dependencies":[],"name":"ValidatePR","resources":[{"description":"MVEL script to invoke wsdl validation","dependencies":[{"groupId":"io.scepta","artifactId":"scepta-samples-utilities","version":"0.1.0-SNAPSHOT"}],"name":"ValidateWSDL.mvel"}]}]}